/*! toby 2015-06-26 */
function onPlayerStateChange(a){var b=a.target.getVideoData(),c=a.data;console.log(a),console.log("state: "+c),socket.emit("youtube-player-state-changed",{state:c,video_data:b}),video_title!==b.title&&(video_title=b.title,socket.emit("video-info",{title:b.title,video_id:b.video_id}))}function onYouTubeIframeAPIReady(){apiReady=!0,socket.emit("youtube-api-ready")}var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var socket=io("http://localhost:5150"),apiReady=!1,player,video_title;socket.on("play",function(a){apiReady!==!1&&void 0!==a&&""!==a&&(void 0===player?player=new YT.Player("player",{videoId:a,playerVars:{autoplay:1},events:{onStateChange:onPlayerStateChange}}):player.loadVideoById(a))});